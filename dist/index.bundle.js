module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={MONGO_URL:"mongodb://localhost/infinityapi-dev"},o={MONGO_URL:"mongodb://localhost/infinityapi-dev"},u={MONGO_URL:"mongodb://localhost/infinityapi-dev"},i={PORT:process.env.PORT||4e3};t.default=Object.assign({},i,function(e){switch(e){case"development":return r;case"test":return o;default:return u}}("production"))},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("passport")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authLocal=void 0;var r=i(n(3)),o=i(n(17)),u=i(n(5));i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}const s=new o.default({usernameField:"email"},async(e,t,n)=>{try{const r=await u.default.findOne({email:e});return r&&r.authenticateUser(t)?n(null,r):n(null,!1)}catch(e){return n(e,!1)}});r.default.use(s);t.authLocal=r.default.authenticate("local",{session:!1})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=a(r),u=a(n(18)),i=n(19),s=(a(n(20)),a(n(21)),n(6));a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}const c=new r.Schema({email:{type:String,unique:!0,required:[!0,"Email is required"],trim:!0,validate:{validator:e=>u.default.isEmail(e),message:"{VALUE} is not a valid email"}},firstName:{type:String,required:[!0,"FirstName is required"],trim:!0},lastName:{type:String,required:[!0,"LastName is required!"],trim:!0},userName:{type:String,required:[!0,"UserName is required"],trim:!0,unique:!0},password:{type:String,required:[!0,"Password is required!"],minlength:[6,"Password need to be longer!"],maxlength:[18,"Password needs to be less than 18 characters"],validate:{validator:e=>s.passwordReg.test(e),message:"{VALUE} is not a valid password!"}}});c.pre("save",function(e){return this.isModified("password")&&(this.password=this._hashPassword(this.password)),e()}),c.methods={_hashPassword:e=>(0,i.hashSync)(e),authenticateUser(e){return compare(e,this.password)}},t.default=o.default.model("User",c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passwordReg=void 0;var r,o=n(24),u=(r=o)&&r.__esModule?r:{default:r};const i=t.passwordReg=/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,18}/;t.default={signup:{email:u.default.string().email().required(),password:u.default.string().regex(i).required(),firstName:u.default.string().required(),lastName:u.default.string().required(),userName:u.default.string().required()}}},function(e,t,n){"use strict";var r=s(n(1)),o=s(n(0));n(8);var u=s(n(9)),i=s(n(14));function s(e){return e&&e.__esModule?e:{default:e}}const a=(0,r.default)();(0,u.default)(a),a.get("/",(e,t)=>{t.send("Hello World!")}),(0,i.default)(a),a.listen(o.default.PORT,e=>{if(e)throw e;console.log(`\n            Server running on port: ${o.default.PORT}\n            ---\n            Running on production\n            ---\n            Make something great\n        `)})},function(e,t,n){"use strict";var r=u(n(2)),o=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}r.default.Promise=global.Promise;try{r.default.connect(o.default.MONGO_URL)}catch(e){r.default.createConnection(o.default.MONGO_URL)}r.default.connection.once("open",()=>console.log("MongoDB Running")).on("error",e=>{throw e})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s(n(10));var r=s(n(11)),o=s(n(12)),u=s(n(13)),i=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}t.default=(e=>{e.use((0,o.default)()),e.use((0,u.default)()),e.use(r.default.json()),e.use(r.default.urlencoded({extended:!0})),e.use(i.default.initialize())})},function(e,t){e.exports=require("morgan")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("compression")},function(e,t){e.exports=require("helmet")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(15),u=(r=o)&&r.__esModule?r:{default:r};n(4);t.default=(e=>{e.use("/api/v1/users",u.default)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=a(n(16)),u=n(4),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(25)),s=a(n(6));function a(e){return e&&e.__esModule?e:{default:e}}const c=new r.Router;c.post("/signup",(0,o.default)(s.default.signup),i.signUp),c.post("/login",u.authLocal,i.login),t.default=c},function(e,t){e.exports=require("express-validation")},function(e,t){e.exports=require("passport-local")},function(e,t){e.exports=require("validator")},function(e,t){e.exports=require("bcrypt-nodejs")},function(e,t){e.exports=require("jsonwebtoken")},function(e,t,n){"use strict";const r=n(22),o=n(23),u=e=>"function"==typeof e,i=function(e,t){let n;const r=t.split(".");return r.length>1&&(t=r.shift()),u(e.path)&&(n=e.path(t)),n&&n.schema&&(n=i(n.schema,r.join("."))),n};e.exports=function(e,t){const n=(t=t||{}).type||"unique",s=t.message||"Error, expected `{PATH}` to be unique. Value: `{VALUE}`",a=[[{_id:1},{unique:!0}]].concat(e.indexes());r(a,t=>{const a=t[1];if(a.unique){const c=Object.keys(t[0]);r(c,t=>{const l="string"==typeof a.unique?a.unique:s,d=i(e,t)||e.path(t);d&&d.validate(function(){return new Promise(e=>{const t=u(this.ownerDocument),n="Query"===this.constructor.name,i=t?this.ownerDocument():this,s="boolean"==typeof i.isNew?i.isNew:!n;let l,f=[];r(c,e=>{let r;r=n?o(this,"_update."+e)||o(this,"_update.$set."+e):o(this,t?e.split(".").pop():e),(o(d,"options.uniqueCaseInsensitive")||a.uniqueCaseInsensitive)&&(r=new RegExp("^"+r+"$","i")),f.push({[e]:r})}),s||(n?r(this._conditions,(e,t)=>{f.push({[t]:{$ne:e}})}):this._id&&f.push({_id:{$ne:this._id}})),n?l=this.model:t?l=this.ownerDocument().model(this.ownerDocument().constructor.modelName):u(this.model)&&(l=this.model(this.constructor.modelName)),l.where({$and:f}).countDocuments((t,n)=>{e(0===n)})})},l,n)})}})}},function(e,t){var n=9007199254740991,r="[object Arguments]",o="[object Function]",u="[object GeneratorFunction]",i=/^(?:0|[1-9]\d*)$/;function s(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););return e}var a,c,l=Object.prototype,d=l.hasOwnProperty,f=l.toString,p=l.propertyIsEnumerable,h=(a=Object.keys,c=Object,function(e){return a(c(e))});function m(e,t){var n=q(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&j(e)}(e)&&d.call(e,"callee")&&(!p.call(e,"callee")||f.call(e)==r)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],o=n.length,u=!!o;for(var i in e)!t&&!d.call(e,i)||u&&("length"==i||O(i,o))||n.push(i);return n}var g,v,y=(g=function(e,t){return e&&_(e,t,w)},function(e,t){if(null==e)return e;if(!j(e))return g(e,t);for(var n=e.length,r=v?n:-1,o=Object(e);(v?r--:++r<n)&&!1!==t(o[r],r,o););return e}),_=function(e){return function(t,n,r){for(var o=-1,u=Object(t),i=r(t),s=i.length;s--;){var a=i[e?s:++o];if(!1===n(u[a],a,u))break}return t}}();function b(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||l,t!==r)return h(e);var t,n,r,o=[];for(var u in Object(e))d.call(e,u)&&"constructor"!=u&&o.push(u);return o}function O(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||i.test(e))&&e>-1&&e%1==0&&e<t}var q=Array.isArray;function j(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?f.call(e):"";return t==o||t==u}(e)}function w(e){return j(e)?m(e):b(e)}function x(e){return e}e.exports=function(e,t){return(q(e)?s:y)(e,"function"==typeof t?t:x)}},function(e,t){e.exports=require("lodash.get")},function(e,t){e.exports=require("joi")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.signUp=async function(e,t){try{const n=await u.default.create(e.body);return t.status(201).json(n)}catch(e){return t.status(500).json(e)}},t.login=function(e,t,n){return t.status(200).json(e.user),n()};var r,o=n(5),u=(r=o)&&r.__esModule?r:{default:r}}]);